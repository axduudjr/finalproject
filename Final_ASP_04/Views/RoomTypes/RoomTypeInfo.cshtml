@model Final_ASP_04.Models.ViewModels.RoomTypeVm
@using Final_ASP_04.Models.ViewModels;
@{
    ViewBag.Title = "房間資訊";
    var otherRoomTypes = ViewBag.OtherRoomTypes as List<RoomTypeVm>;
    var selectedBranchId = ViewBag.selectedBranchId;
    var selectedRoomTypeId = ViewBag.selectedRoomTypeId;
    var roomTypePictures = ViewBag.RoomTypePictures;
}
<!-- 標題 -->
<div class="container-fluid has-background-image" style="margin-top:51px;">
    <h1 class="pageTitle">房間資訊</h1>
</div>
<!-- 麵包屑 -->
<div class="container">
    <div class="mt-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">首頁</a></li>
                <li class="breadcrumb-item"><a href="/Branches/ListRoomTypes?selectedBranchId=@selectedBranchId">房型一覽</a></li>
                <li class="breadcrumb-item active"><a>房間資訊</a></li>
            </ol>
        </nav>
    </div>
</div>

<!-- 房間資訊 -->
<div>
    <div class="container">
        <div class="row">
            <h1>
                @Html.DisplayFor(model => model.RoomTypeName)
            </h1>
        </div>
        <div class="row product-info">
            <div class="col-lg-4">
                <div class="left">
                    <img src="/images/@Html.DisplayFor(model => model.FileName)" width="100%" class="productPhoto" alt="">
                    <div class="images">
                        <ul>
                            <li><img src="/images/@Model.FileName" alt=""></li>
                            <li><img src="/images/@roomTypePictures[0].FileName" alt=""></li>
                            <li><img src="/images/@roomTypePictures[1].FileName" alt=""></li>
                            <li><img src="/images/@roomTypePictures[2].FileName" alt=""></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="right">
                    <h3>房間資訊</h3>
                    <p>
                        @Html.DisplayFor(model => model.RoomTypeDescription)
                    </p>
                    <h3>房內設備</h3>
                    <ul>
                        <li>免費無線WIFI</li>
                        <li>礦泉水 / UCC咖啡 / 塔爾登茶包</li>
                        <li>免治馬桶</li>
                        <li>高畫質液晶電視</li>
                    </ul>
                    <div>
                        <p class="fw-bolder" style="font-size: large;">
                            最低NT$1000起
                            &nbsp;&nbsp;@using (Html.BeginForm("SearchRoom", "Rooms", FormMethod.Post))
                            {
                                @Html.Hidden("startDateTime", DateTime.Now.ToString("yyyy-MM-dd"))
                                @Html.Hidden("endDateTime", DateTime.Now.AddDays(1).ToString("yyyy-MM-dd"))
                                @Html.Hidden("branchId", Model.BranchId)
                                @Html.Hidden("roomTypeId", Model.Id)
                                @Html.Hidden("guestNumberId", 0)

                                <button type="submit" class="btn btn-primary">前往預約</button>
                            }
                            @*@Html.ActionLink("前往預約", "SearchRoom","Rooms",new { startDateTime = DateTime.Now.ToString("yyyy-MM-dd"), endDateTime = @DateTime.Now.AddDays(1).ToString("yyyy-MM-dd"), branchId = selectedBranchId, roomTypeId = selectedRoomTypeId, guestNumberId = 0 },new {@class="btn btn-primary"})*@
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- 評論 -->
        <div class="row"> 
            <h3 class="fw-bolder mb-3">本館客戶評價</h3>
                @{
                    Html.RenderAction("ListComments", "Comments", new { branchId = selectedBranchId });
                }
        </div>
        <!-- 其他房間 -->
        <div class="row mt-4">
            <h3 class="fw-bolder">其他房間資訊</h3>
            <table class="table otherProducts">
                @Html.Partial("_ListOtherRoomTypePartial", otherRoomTypes)
            </table>
        </div>
    </div>
        </div>

        @section css{
            <style>
                .has-background-image {
                    background-image: url(/images/TitleImg.jpg);
                    height: 200px;
                }

                @@media screen and (min-width: 1200px) {
                    .body-content {
                        padding: 5px;
                        margin: 0px;
                        max-width: none;
                    }
                }

                .pageTitle {
                    box-sizing: border-box;
                    color: black;
                    font-size: 50px;
                    font-weight: bold;
                    padding-top: 60px;
                    padding-left: 15%;
                }

                h3 {
                    background-color: rgb(226, 252, 252);
                }

                .otherProduct {
                    max-width: 250px;
                    height: 100%;
                    object-fit: cover;
                }

                .otherProducts h6 {
                    font-weight: 700;
                    color: #333;
                    margin-bottom: 15px;
                    font-size: 1.3rem;
                }

                .breadcrumb {
                    background-color: transparent;
                    font-size: 18px;
                }

                .product-info { /*內含left , right 二個div*/
                    width: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: start;
                    /* border: 1px solid #ccc; */
                }

                    .product-info .left {
                        height: 450px;
                        padding-bottom: 20px;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: start;
                        /* border: 1px solid #ccc; */
                    }

                    .product-info .right {
                        padding-top: 20px;
                    }

                .productPhoto {
                    padding-bottom: 25px;
                    object-fit: cover; /*contain 符合指定的寬高比例*/
                    height: 320px;
                }

                .product-info .images {
                    width: 100%;
                    height: 70px;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: start;
                    overflow-y: hidden;
                    overflow-x: auto;
                    border: 1px solid #ccc;
                }

                .product-info li img {
                    width: 65px;
                    margin-left: 2px;
                }

                .product-info .images ul {
                    list-style: none; /* 不顯示項目符號 */
                    width: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    cursor: pointer;
                    border: 1px solid #ccc;
                }
            </style>
        }

        @section js {
            <script>
                $(function () {
                    $('.product-info ul li img').click(function () {
                        let imgSrc = $(this).attr('src');
                        $('.productPhoto').attr('src', imgSrc);
                    })
                })
            </script>
        }

